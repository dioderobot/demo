---
title: "DM0001 - ZenDrive"
url: "https://app.diode/computer/demo/DM0001/spec"
confidential: false
company:
  name: "Diode Computers, Inc."
  url: "https://diode.computer"
releases:
  - version: "1.0.0"
    date: "2025/08/26"
    description: "Initial DM0001 release"
    commit: ""
    warnings:
      - "Verify all electrical limits against latest component datasheets before tape-out."
      - "Confirm power dissipation calculations for phase drivers under maximum load conditions."
notes:
  - title: "Reference design"
    date: "2024/12/28"
    content: |
      - This board is based on the MB1419-G431CBU6-C01_SCH reference design by ST
---

## DM001: ZenDrive

A 3-phase BLDC motor controller reference design built with Zener.

### Board acceptance criteria

- [x] Board can be powered with 8V-28V supply
- [x] All three phase outputs are independently controllable via PWM
- [x] CAN transceiver is functional and passes loopback test
- [x] Hall encoder interface provides correct A/B/Z signals to MCU
- [x] Shunt current sense amplifiers output measurable signals to ADC
- [x] Power rails (10V, 5V, 3V3) are within ±5% of nominal values under load
- [x] SWD debug interface is accessible and MCU can be programmed in-circuit

## Description

The DM0001 ZenDrive employs a sophisticated multi-stage architecture to provide precise motor control with comprehensive feedback and communication capabilities. The STM32G431CBU6 microcontroller serves as the central processing unit, utilizing its advanced timer peripherals (TIM1) to generate complementary PWM signals with programmable dead-time for safe MOSFET switching.

The power architecture consists of three cascaded stages: a high-efficiency buck converter reduces the 8-28V input to a stable 10V rail, followed by linear regulators that provide clean 5V and 3.3V supplies for analog and digital circuits. This approach minimizes switching noise on sensitive analog circuits while maintaining good efficiency for the overall system.

Motor control is implemented through three independent half-bridge drivers, each consisting of an L6387ED gate driver IC paired with STL180N6F7 power MOSFETs. The gate drivers provide the necessary voltage translation and current drive capability to switch the power MOSFETs at frequencies up to 100 kHz with precise timing control.

Current sensing utilizes a dual-shunt topology with precision operational amplifiers to condition the signals for the STM32's 12-bit ADC. This configuration enables accurate current measurement for both motor control algorithms and protection functions.

The CAN interface provides robust communication capability using the TCAN330DCNT transceiver, supporting data rates up to 1 Mbit/s for real-time control applications.

# Features

- STM32G431CBU6 microcontroller (Cortex-M4F, 170 MHz, 128 KB Flash, 32 KB RAM)
- Three half-bridge phase drivers with L6387ED gate drivers
- STL180N6F7 power MOSFETs for high-current switching
- Hall sensor interface with digital filtering and position feedback
- Dual shunt current sensing with operational amplifiers
- TCAN330DCNT CAN transceiver with 1 Mbit/s capability
- Multi-stage power supply: 8-28V input → 10V buck → 5V LDO → 3.3V LDO
- 4-pad SWD programming header (Tag-Connect TC-2030 footprint)
- CAN termination resistor with solder jumper selection
- Comprehensive protection: reverse polarity, overvoltage, overcurrent
- Operating temperature range: -40°C to +85°C
- Compact form factor optimized for motor control applications

# Applications

- Electric vehicle motor controllers and inverters
- Industrial automation and robotics motor drives
- HVAC fan and pump control systems
- Electric power tools and appliances
- Drone and UAV propulsion systems
- Laboratory motor control development and testing
- Educational platforms for motor control learning
- Prototype development for custom motor applications

## Specifications

| Parameter                    | Symbol   | Min   | Typ  | Max   | Unit | Note                                      |
| ---------------------------- | -------- | ----- | ---- | ----- | ---- | ----------------------------------------- |
| Input supply voltage         | VIN      | 8.0   | 24.0 | 28.0  | V    | Reverse-polarity protection included      |
| 10V rail output voltage      | V10      | 9.5   | 10.0 | 10.5  | V    | Buck converter output                     |
| 5V rail output voltage       | V5       | 4.75  | 5.0  | 5.25  | V    | LDO output from 10V rail                  |
| 3.3V rail output voltage     | VCC      | 3.135 | 3.3  | 3.465 | V    | LDO output from 5V rail                   |
| MCU run current              | ICC      | —     | 25   | 60    | mA   | 170 MHz, motor control peripherals active |
| Phase current (continuous)   | IPHASE   | —     | —    | 15    | A    | With adequate thermal management          |
| Phase current (peak)         | IPHASE   | —     | —    | 30    | A    | <10s duration                            |
| PWM frequency                | fPWM     | 10    | 20   | 100   | kHz  | Configurable via software                 |
| Hall sensor input voltage    | VHALL    | 0     | VCC  | VCC   | V    | 3.3V logic levels                        |
| CAN common-mode voltage      | VCM_CAN  | -2    | —    | +7    | V    | ISO 11898-2 compliant                    |
| CAN differential voltage     | VDIFF    | 1.5   | 2.0  | 3.0   | V    | Dominant state                            |
| Current sense accuracy       | —        | —     | ±2   | ±5    | %    | Over temperature range                    |
| Operating temperature        | TA       | -40   | 25   | +85   | °C   | Extended industrial range                 |

### Highlights

- STM32G431 MCU (QFN-48) with SWD via Tag-Connect (TC2030)
- CAN transceiver interface and termination
- 3 half-bridge phase drivers with PWM (TIM1 CH1/2/3 and CH1N/2N/3N)
- Hall encoder interface (A/B/Z)
- Shunt-based current sensing with op-amps and ADC nets
- Power rails: VPLUS → 10V buck → 5V LDO → 3V3 LDO

### Repository layout

- `ZenDrive.zen`: Top-level board composition
- `src/`: Reusable subsystems (PhaseDriver, ShuntSense, HallEncoder, PowerCaps, CAN)
- `components/`: Vendor parts with symbol/footprint/datasheet and `.zen`
- `reference/`: Stable wrappers around components for consistent interfaces
- `boards/`: Reference schematics/BOMs for known variants
